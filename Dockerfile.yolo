# ü¶æ Dockerfile para Servi√ßo YOLO de Detec√ß√£o de Alimentos
FROM python:3.9-slim

# Definir diret√≥rio de trabalho
WORKDIR /app

# Instalar depend√™ncias do sistema
RUN apt-get update && apt-get install -y \
    libgl1-mesa-glx \
    libglib2.0-0 \
    libsm6 \
    libxext6 \
    libxrender-dev \
    libgomp1 \
    libgthread-2.0-0 \
    libgtk-3-0 \
    libavcodec-dev \
    libavformat-dev \
    libswscale-dev \
    libv4l-dev \
    libxvidcore-dev \
    libx264-dev \
    libjpeg-dev \
    libpng-dev \
    libtiff-dev \
    libatlas-base-dev \
    gfortran \
    wget \
    curl \
    && rm -rf /var/lib/apt/lists/*

# Copiar requirements
COPY requirements-yolo.txt .

# Instalar depend√™ncias Python
RUN pip install --no-cache-dir -r requirements-yolo.txt

# Copiar c√≥digo do servi√ßo
COPY yolo-service-example.py .

# Expor porta
EXPOSE 8001

# Comando para iniciar o servi√ßo
CMD ["python", "yolo-service-example.py"]
